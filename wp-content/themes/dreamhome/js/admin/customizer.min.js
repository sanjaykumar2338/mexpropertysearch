!function(t){"use strict";var i=wp.customize;t(document);var e=function(){t(".themesflat-options-control-box-controls input[type=text]").on("change",function(){var e=t(this).parents(".themesflat-options-control-box-controls"),n=e.find("input[type=hidden]"),a=n.data("customize-setting-link"),s={};e.find("input[type=text]").each(function(){var i=t(this);s[i.data("position")]=i.val()}),n.val(JSON.stringify(s)),i(a)&&i.instance(a).set(JSON.stringify(s))})},n=function(){var e=t(".themesflat_icons"),n=t(document),a=e.find(".item-properties"),s=e.parent().find('input[type="hidden"]'),o=s.data("customize-setting-link");t().sortable&&n.find(".themesflat_icons").sortable({stop:function(t,i){s=(e=i.item.parent()).parent().find('input[type="hidden"]'),r()}});var l=function(t){for(var i=t.prevAll(".item").length+1;i>7;)i-=7;return i},r=function(){var n=[],a={};e.find("> li[data-id]").each(function(){n.push(t(this).attr("data-id")),void 0!==t(this).attr("data-link")&&(a[t(this).attr("data-id")]=t(this).attr("data-link"))}),a.__ordering__=n,s.val(JSON.stringify(a)),i(o)&&i.instance(o).set(JSON.stringify(a))},c=function(){var i=t(this),n=l(i),r=i.nextAll(".item"),c=t.makeArray(r).slice(0,7-n);if(o=(s=(e=i.parent()).parent().find('input[type="hidden"]')).data("customize-setting-link"),a=e.find(".item-properties"),t().sortable&&e.sortable(),i.hasClass("active")){p();return}a.addClass("property_active"),e.children().removeClass("active"),i.addClass("active"),0==c.length?i.after(a):t(c.pop()).after(a),a.find(".input-title").text(i.attr("data-title")),a.find(".input-field").val(i.attr("data-link")),a.find(".input-field").get(0).focus()},d=function(){a.removeClass("property_active"),e.children().removeClass("active")},p=function(){(a=e.find(".item-properties").first()).removeClass("property_active"),""!=a.find(".input-field").val().trim()?e.find("li.active").attr("data-link",a.find(".input-field").val()):e.find("li.active").removeAttr("data-link"),r(e),d()};n.on("click","button.cancel",d),n.on("click","button.confirm",p),n.on("keydown","input.input-field",function(t){13==t.keyCode&&(t.preventDefault(),p()),27==t.keyCode&&(t.preventDefault(),d())}),n.on("click",".themesflat_icons .item",c)},a=function(){t(".slider-custom-control").each(function(){var i=t(this).find(".customize-control-slider-value").val(),e=t(this).find(".slider-control"),n=parseInt(e.attr("slider-min-value")),a=parseInt(e.attr("slider-max-value")),s=parseInt(e.attr("slider-step-value"));e.slider({value:i,min:n,max:a,step:s,change:function(i,e){t(this).parent().find(".customize-control-slider-value").trigger("change")}})}),t(".slider-control").on("slide",function(i,e){t(this).parent().find(".customize-control-slider-value").val(e.value)}),t(".slider-reset").on("click",function(){var i=t(this).attr("slider-reset-value");t(this).parent().find(".customize-control-slider-value").val(i),t(this).parent().find(".slider-control").slider("value",i)}),t(".customize-control-slider-value").blur(function(){var i=t(this).val(),e=t(this).parent().find(".slider-control"),n=parseInt(e.attr("slider-min-value")),a=parseInt(e.attr("slider-max-value"));i<n&&(i=n,t(this).val(i)),i>a&&(i=a,t(this).val(i)),t(this).parent().find(".slider-control").slider("value",i)})},s=function i(e,n){if(0!=t(e).length){t().choosen&&t(".select-choosen").chosen();var a=t(e),s=a.find("#typography-value").attr("data-customize-setting-link"),o=JSON.parse(a.find("#datas").attr("data_variants")),l=JSON.parse(a.find("#datas").attr("data_subsets"));a.find(".typography-font select").on("change",function(){var i,n=t(this).find("option:selected").attr("data_variants"),a=t(this).closest(e).find(".typography-style select"),r=a.val();a.empty(),void 0!==n&&t.each(JSON.parse(n),function(i,e){e=e.trim(),a.append(t("<option />",{value:e}).text(void 0!==o[e]?o[e]:e))}),a.val(r);var c=t(this).find("option:selected").attr("data_subsets"),d=t(this).closest(e).find(".typography-subsets .themesflat-options-control-inputs");d.empty(),void 0!==c&&t.each(JSON.parse(c),function(t,e){i='                                                <label class="_options-switcher-subsets">                                                        <span class="themesflat-options-control-title">'+(void 0!==l[e=e.trim()]?l[e]:e)+'</span>                                                        <input type="checkbox" value="'+e+'" name="_themesflat-options-control-typography-'+s+'[subsets]">                                                        <span class="themesflat-options-control-indicator">                                                                <span></span>                                                        </span>                                                </label>',d.append(i)})});var r=function(i){if(s=i.find("#typography-value").attr("data-customize-setting-link"),wp.customize&&s){var e=[];a.find('._options-switcher-subsets input[type="checkbox"]:checked').each(function(){e.push(t(this).val())}),wp.customize.instance(s).set(JSON.stringify({family:i.find(".typography-font select").val(),size:i.find(".typography-size input").val(),line_height:i.find(".typography-line_height input").val(),letter_spacing:i.find(".typography-letter_spacing input").val(),style:i.find(".typography-style select").val(),color:i.find(".typography-color .themesflat-color-picker").val(),subsets:e}))}};a.on("change","select, input",function(){r(t(this).closest(".themesflat-options-control-typography"))})}};t(document).on("widget-updated",function(t,i){n()}),t(function(){n(),e(),a(),s(".themesflat-options-control-typography")})}(jQuery);var functest=function(){};