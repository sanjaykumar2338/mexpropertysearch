!function(t){"use strict";var a,e=function(){t("a.multi-images-upload").each(function(){var t=jQuery(this),e=t.data("store");t.on("click",function(t){if(t.preventDefault(),a){a.open();return}(a=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:jQuery(this).data("uploader_button_text"),multiple:!0,library:{type:"image"}})).on("select",function(t){for(var i=a.state().get("selection").toJSON(),n=jQuery(e),r=[],o=i.length-1;o>=0;o--)r.push(i[o].url);n.val(r).trigger("change"),n.trigger("updateThumbnails",{urls:r})}),a.open()})})},i=function(){t("a.multi-images-remove").each(function(){var a=t(this),e=jQuery(a.data("store"));a.on("click",function(t){t.preventDefault(),e.val("").trigger("change"),e.trigger("updateThumbnails",{urls:""})})})},n=function(){t("input.multi-images-control-input").each(function(){var a=jQuery(this),e=jQuery(a.data("thumbs-container"));a.on("updateThumbnails",function(a,i){var n=i.urls;e.empty();for(var r=n.length-1;r>=0;r--){var o=t("<li/>");o.attr("style","background-image:url("+n[r]+");"),o.attr("class","thumbnail"),o.attr("data-src",n[r]),e.append(o)}})})},r=function(){t(".customize-control-multi-image .thumbnails").sortable({items:"> li",axis:"y",opacity:.6,distance:3,cursor:"move",delay:150,tolerance:"pointer",update:function(a,e){var i,n=t(this),r=[];jQuery(n.find("li")).each(function(){r.push(t(this).data("src"))}),(i=t(n.data("store"))).val(r).trigger("change"),n.sortable("refreshPositions")}}).disableSelection()};t(function(){e(),i(),n(),r()})}(jQuery);